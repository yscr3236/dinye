mixed-port: 7890
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
ipv6: true

external-controller: 0.0.0.0:9090
external-ui: "/etc/openclash/dashboard"
secret: ""

dns:
  enable: true
  listen: 0.0.0.0:53
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "+.lan"
    - "+.local"
    - "+.localdomain"
    - "localhost.ptlogin2.qq.com"
    - "*.srv.nintendo.net"
    - "stun.*.*"
    - "*.stun.*.*"
    - "*.stun.*"
    - "*.msftconnecttest.com"
    - "*.msftncsi.com"
    - "*.google.com"
    - "*.facebook.com"
    - "dns.google"
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
    - "[2400:3200::1]"
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
    - tls://223.5.5.5:853
    - tls://120.53.53.53:853
    - tls://[2400:3200::1]:853
    - https://[2400:3200:baba::1]/dns-query
  fallback:
    - https://1.1.1.1/dns-query
    - https://dns.google/dns-query
    - https://doh.opendns.com/dns-query
    - tls://1.0.0.1:853
    - https://[2620:fe::fe]/dns-query
    - tls://[2606:4700:4700::1111]:853
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4

tun:
  enable: true
  stack: system
  auto-route: true
  auto-detect-interface: true
  dns-hijack:
    - any:53
    - any:5353
    - any:853
    - "[::]:53"
    - "[::]:5353"
    - "[::]:853"

profile:
  store-selected: true
  store-fake-ip: true

proxy-providers:
  hxyun:
    type: http
    url: "机场订阅"
    interval: 86400
    path: /etc/openclash/proxy_providers/hxyun.yaml
    health-check:
      enable: true
      interval: 600
      lazy: true
      url: http://cp.cloudflare.com/generate_204

proxy-groups:
  - name: 🌍 国外流量
    type: select
    proxies:
      - ♻️ 自动选择
      - DIRECT
    use:
      - hxyun

  - name: ♻️ 自动选择
    type: url-test
    use:
      - hxyun
    url: http://cp.cloudflare.com/generate_204
    interval: 300

  - name: 📺 奈飞 Netflix
    type: select
    proxies:
      - 🌍 国外流量
      - ♻️ 自动选择
      - DIRECT

  - name: 📺 哔哩哔哩
    type: select
    proxies:
      - DIRECT
      - ♻️ 自动选择
      - 🌍 国外流量

  - name: 🎮 游戏
    type: select
    proxies:
      - ♻️ 自动选择
      - 🌍 国外流量
      - DIRECT

  - name: 🧠 OpenAI
    type: select
    proxies:
      - ♻️ 自动选择
      - 🌍 国外流量
      - DIRECT

  - name: 📹 YouTube
    type: select
    proxies:
      - 🌍 国外流量
      - ♻️ 自动选择
      - DIRECT

  - name: 🌍 Google
    type: select
    proxies:
      - 🌍 国外流量
      - ♻️ 自动选择
      - DIRECT

  - name: 🧠 ChatGPT
    type: select
    proxies:
      - 🧠 OpenAI
      - 🌍 国外流量
      - ♻️ 自动选择

  - name: 🤖 Claude1
    type: select
    proxies:
      - 🌍 国外流量
      - ♻️ 自动选择
      - DIRECT

  - name: 🐙 GitHub
    type: select
    proxies:
      - 🌍 国外流量
      - ♻️ 自动选择
      - DIRECT

  - name: 📦 Telegram
    type: select
    proxies:
      - 🌍 国外流量
      - ♻️ 自动选择
      - DIRECT

  - name: 📱 TikTok
    type: select
    proxies:
      - 🌍 国外流量
      - ♻️ 自动选择
      - DIRECT

  - name: 🍎 Apple
    type: select
    proxies:
      - DIRECT
      - ♻️ 自动选择
      - 🌍 国外流量

  - name: 🌐 国外网站
    type: select
    proxies:
      - 🌍 国外流量
      - ♻️ 自动选择
      - DIRECT

  - name: 🇨🇳 国内网站
    type: select
    proxies:
      - DIRECT
      - ♻️ 自动选择

  - name: 🚫 拦截广告
    type: select
    proxies:
      - REJECT
      - DIRECT

  - name: 🐟 漏网之鱼
    type: select
    proxies:
      - 🌍 国外流量
      - ♻️ 自动选择
      - DIRECT

rule-providers:
  netflix:
    type: http
    behavior: classical
    url: https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/netflix.yaml
    path: ./ruleset/netflix.yaml
    interval: 86400

  bilibili:
    type: http
    behavior: classical
    url: https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/bilibili.yaml
    path: ./ruleset/bilibili.yaml
    interval: 86400

  openai:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/DivineEngine/Profiles@master/Clash/RuleSet/OpenAI.yaml
    path: ./ruleset/openai.yaml
    interval: 86400

  youtube:
    type: http
    behavior: classical
    url: https://fastly.jsdelivr.net/gh/DivineEngine/Profiles@master/Clash/RuleSet/StreamingMedia/YouTube.yaml
    path: ./ruleset/youtube.yaml
    interval: 86400

  google:
    type: http
    behavior: classical
    url: https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.yaml
    path: ./ruleset/google.yaml
    interval: 86400

  chatgpt:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/DivineEngine/Profiles@master/Clash/RuleSet/OpenAI.yaml
    path: ./ruleset/chatgpt.yaml
    interval: 86400

  claude:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/claude.yaml
    path: ./ruleset/claude.yaml
    interval: 86400

  github:
    type: http
    behavior: classical
    url: https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/github.yaml
    path: ./ruleset/github.yaml
    interval: 86400

  telegram:
    type: http
    behavior: classical
    url: https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegram.yaml
    path: ./ruleset/telegram.yaml
    interval: 86400

  tiktok:
    type: http
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/DivineEngine/Profiles@master/Clash/RuleSet/StreamingMedia/TikTok.yaml
    path: ./ruleset/tiktok.yaml
    interval: 86400

  apple:
    type: http
    behavior: classical
    url: https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.yaml
    path: ./ruleset/apple.yaml
    interval: 86400

  global:
    type: http
    behavior: classical
    url: https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/global.yaml
    path: ./ruleset/global.yaml
    interval: 86400

  china:
    type: http
    behavior: classical
    url: https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/china.yaml
    path: ./ruleset/china.yaml
    interval: 86400

  advertising:
    type: http
    behavior: classical
    url: https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.yaml
    path: ./ruleset/reject.yaml
    interval: 86400

  lancidr:
    type: http
    behavior: ipcidr
    url: https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.yaml
    path: ./ruleset/lancidr.yaml
    interval: 86400

  cncidr:
    type: http
    behavior: ipcidr
    url: https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.yaml
    path: ./ruleset/cncidr.yaml
    interval: 86400

  applications:
    type: http
    behavior: classical
    url: https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.yaml
    path: ./ruleset/applications.yaml
    interval: 86400

rules:
  - RULE-SET,netflix,📺 奈飞 Netflix
  - RULE-SET,bilibili,📺 哔哩哔哩
  - RULE-SET,openai,🧠 OpenAI
  - RULE-SET,youtube,📹 YouTube
  - RULE-SET,google,🌍 Google
  - RULE-SET,chatgpt,🧠 ChatGPT
  - RULE-SET,claude,🤖 Claude1
  - RULE-SET,github,🐙 GitHub
  - RULE-SET,telegram,📦 Telegram
  - RULE-SET,tiktok,📱 TikTok
  - RULE-SET,apple,🍎 Apple
  - RULE-SET,global,🌐 国外网站
  - RULE-SET,china,🇨🇳 国内网站
  - RULE-SET,advertising,🚫 拦截广告
  - RULE-SET,applications,🌍 国外流量
  - RULE-SET,cncidr,DIRECT
  - RULE-SET,lancidr,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,🐟 漏网之鱼
