# ==== åŸºç¡€è®¾ç½® ====
mixed-port: 7890
socks-port: 7891
allow-lan: true
bind-address: "*"
mode: rule
log-level: info
ipv6: true
external-controller: 0.0.0.0:9090
secret: ""
unified-delay: true
global-client-fingerprint: chrome

profile:
  store-selected: true
  store-fake-ip: true

# ==== DNS é…ç½®ä¼˜åŒ– ====
dns:
  enable: true
  listen: 0.0.0.0:7874
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-filter:
    - "+.lan"
    - "+.local"
    - "+.internal"
    - "+.arpa"
    - "+.localdomain"
    - "+.example"
    - "time.*.com"
    - "ntp.*.com"
    - "pool.ntp.org"
    - "gemini.circumlunar.space"
    - "connect.rom.miui.com"
    - "localhost.ptlogin2.qq.com"
    - "resolver.*"
    - "stun.*.*"
    - "xbox.*.*"
  nameserver:
    - tls://dns.alidns.com
    - tls://dot.pub
    - https://dns.alidns.com/dns-query
  fallback:
    - https://1.1.1.1/dns-query
    - https://dns.google/dns-query
    - tls://1.1.1.1
    - tls://8.8.8.8
  fallback-filter:
    geoip: true
    geoip-code: CN

# ==== èŠ‚ç‚¹è®¢é˜… ====
proxy-providers:
  hxyun:
    type: http
    url: "è®¢é˜…èŠ‚ç‚¹"
    interval: 3600
    path: ./proxy_providers/hxyun.yaml
    health-check:
      enable: true
      interval: 300
      url: http://cp.cloudflare.com/generate_204

# ==== ç­–ç•¥ç»„ ====
proxy-groups:
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - DIRECT
      - ğŸ›‘ æ‹¦æˆªå¹¿å‘Š
      - ğŸŒ å›½å¤–ç½‘ç«™
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹
    use:
      - hxyun

  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    use:
      - hxyun
    url: http://cp.cloudflare.com/generate_204
    interval: 300

  - name: â™»ï¸ è´Ÿè½½å‡è¡¡
    type: load-balance
    strategy: round-robin
    use:
      - hxyun

  - name: ğŸ§ª æ•…éšœè½¬ç§»
    type: fallback
    use:
      - hxyun
    url: http://cp.cloudflare.com/generate_204
    interval: 300

  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    type: url-test
    use:
      - hxyun
    filter: "ğŸ‡­ğŸ‡°|HK|Hongkong"
    url: http://cp.cloudflare.com/generate_204
    interval: 300

  - name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
    type: url-test
    use:
      - hxyun
    filter: "ğŸ‡¸ğŸ‡¬|SG|Singapore"
    url: http://cp.cloudflare.com/generate_204
    interval: 300

  - name: ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹
    type: url-test
    use:
      - hxyun
    filter: "ğŸ‡¹ğŸ‡¼|TW|Taiwan"
    url: http://cp.cloudflare.com/generate_204
    interval: 300

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    type: url-test
    use:
      - hxyun
    filter: "ğŸ‡¯ğŸ‡µ|JP|Japan"
    url: http://cp.cloudflare.com/generate_204
    interval: 300

  - name: ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
    type: url-test
    use:
      - hxyun
    filter: "ğŸ‡ºğŸ‡¸|US|United States"
    url: http://cp.cloudflare.com/generate_204
    interval: 300

  - name: ğŸ“¹ YouTube-ä¼˜é€‰
    type: url-test
    use:
      - hxyun
    url: http://www.gstatic.com/generate_204
    interval: 300
    filter: "(?i)(YouTube|YT)|ğŸ‡­ğŸ‡°|ğŸ‡¯ğŸ‡µ|ğŸ‡¸ğŸ‡¬|HK|JP|SG"

  - name: ğŸŒ Google-ä¼˜é€‰
    type: fallback
    use:
      - hxyun
    url: http://cp.cloudflare.com/generate_204
    filter: "(?i)ğŸ‡ºğŸ‡¸|US|Google|OpenAI|Gemini"

  - name: ğŸ§  ChatGPT-ä¼˜é€‰
    type: fallback
    use:
      - hxyun
    url: http://cp.cloudflare.com/generate_204
    filter: "(?i)ğŸ‡ºğŸ‡¸|ğŸ‡¯ğŸ‡µ|ğŸ‡¸ğŸ‡¬|ChatGPT|OpenAI"

  - name: ğŸ“¦ Telegram-ä¼˜é€‰
    type: fallback
    use:
      - hxyun
    url: http://cp.cloudflare.com/generate_204
    filter: "(?i)ğŸ‡ºğŸ‡¸|ğŸ‡¯ğŸ‡µ|ğŸ‡¸ğŸ‡¬|Telegram"

  - name: ğŸ“± TikTok-ä¼˜é€‰
    type: fallback
    use:
      - hxyun
    url: http://cp.cloudflare.com/generate_204
    filter: "(?i)ğŸ‡¯ğŸ‡µ|ğŸ‡ºğŸ‡¸|ğŸ‡¸ğŸ‡¬|TikTok"

  - name: ğŸ¬ Netflix-ä¼˜é€‰
    type: fallback
    use:
      - hxyun
    url: http://cp.cloudflare.com/generate_204
    filter: "(?i)Netflix|ğŸ‡ºğŸ‡¸|ğŸ‡¯ğŸ‡µ|ğŸ‡¸ğŸ‡¬"

  - name: ğŸ Apple-ä¼˜é€‰
    type: fallback
    use:
      - hxyun
    url: http://cp.cloudflare.com/generate_204
    filter: "(?i)Apple|iTunes|macOS|iCloud|ğŸ‡¸ğŸ‡¬|ğŸ‡­ğŸ‡°|ğŸ‡¯ğŸ‡µ"

  - name: ğŸ¤– Gemini-ä¼˜é€‰
    type: fallback
    use:
      - hxyun
    url: http://cp.cloudflare.com/generate_204
    filter: "(?i)ğŸ‡ºğŸ‡¸|US|Gemini|OpenAI|Google"

  - name: ğŸ›‘ æ‹¦æˆªå¹¿å‘Š
    type: select
    proxies:
      - REJECT
      - DIRECT

  - name: ğŸŒ å›½å¤–ç½‘ç«™
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    use:
      - hxyun

# ==== è§„åˆ™é›† ====
rule-providers:
  reject:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt
    path: ./ruleset/reject.yaml
    interval: 86400

  YouTube:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/YouTube.txt
    path: ./ruleset/YouTube.yaml
    interval: 86400

  google:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt
    path: ./ruleset/google.yaml
    interval: 86400

  openai:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/DivineEngine/Profiles@master/Clash/RuleSet/Extra/OpenAI.yaml
    path: ./ruleset/openai.yaml
    interval: 86400

  telegram:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt
    path: ./ruleset/telegram.yaml
    interval: 86400

  tiktok:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tiktok.txt
    path: ./ruleset/tiktok.yaml
    interval: 86400

  netflix:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/netflix.txt
    path: ./ruleset/netflix.yaml
    interval: 86400

  apple:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt
    path: ./ruleset/apple.yaml
    interval: 86400

# ==== è§„åˆ™ ====
rules:
  - RULE-SET,YouTube,ğŸ“¹ YouTube-ä¼˜é€‰
  - DOMAIN-SUFFIX,youtube.com,ğŸ“¹ YouTube-ä¼˜é€‰
  - DOMAIN-SUFFIX,ytimg.com,ğŸ“¹ YouTube-ä¼˜é€‰
  - DOMAIN-KEYWORD,youtube,ğŸ“¹ YouTube-ä¼˜é€‰
  - DOMAIN-KEYWORD,ytimg,ğŸ“¹ YouTube-ä¼˜é€‰
  - RULE-SET,google,ğŸŒ Google-ä¼˜é€‰
  - DOMAIN-SUFFIX,google.com,ğŸŒ Google-ä¼˜é€‰
  - DOMAIN-KEYWORD,google,ğŸŒ Google-ä¼˜é€‰
  - RULE-SET,openai,ğŸ§  ChatGPT-ä¼˜é€‰
  - DOMAIN-SUFFIX,gemini.google.com,ğŸ¤– Gemini-ä¼˜é€‰
  - DOMAIN-SUFFIX,generativeai.google,ğŸ¤– Gemini-ä¼˜é€‰
  - DOMAIN-KEYWORD,gemini,ğŸ¤– Gemini-ä¼˜é€‰
  - DOMAIN-SUFFIX,circumlunar.space,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN,gemini.circumlunar.space,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,telegram,ğŸ“¦ Telegram-ä¼˜é€‰
  - RULE-SET,tiktok,ğŸ“± TikTok-ä¼˜é€‰
  - RULE-SET,netflix,ğŸ¬ Netflix-ä¼˜é€‰
  - RULE-SET,apple,ğŸ Apple-ä¼˜é€‰
  - RULE-SET,reject,ğŸ›‘ æ‹¦æˆªå¹¿å‘Š
  - GEOIP,CN,DIRECT
  - MATCH,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
